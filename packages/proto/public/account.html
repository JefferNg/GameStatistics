<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles/reset.css" />
    <link rel="stylesheet" href="styles/account.css" />
    <link rel="stylesheet" href="styles/page.css" />
    <link rel="stylesheet" href="styles/tokens.css" />
    <script type="importmap">
      {
        "imports": {
          "@calpoly/mustang": "https://unpkg.com/@calpoly/mustang"
        }
      }
    </script>
    <script type="module">
      import { define } from "@calpoly/mustang";
      import { GameElement } from "./scripts/game.js";
      import { AccountElement } from "./scripts/account.js";

      define({
        "game-card": GameElement,
        "account-card": AccountElement,
      });
    </script>
    <script>
      document.body.addEventListener("dark-mode:toggle", (event) => {
        const page = event.currentTarget;
        const checked = event.detail.checked;
        page.classList.toggle("dark-mode", checked);
      });

      function toggleDarkMode(target, checked) {
        const customEvent = new CustomEvent("dark-mode:toggle", {
          bubbles: true,
          detail: { checked },
        });
        target.dispatchEvent(customEvent);
      }
      window.toggleDarkMode = toggleDarkMode;
    </script>
  </head>
  <body>
    <account-card>
      <header slot="acc-head" id="account-head">
        <div id="account-logo">
          <h1 slot="name">Username</h1>
          <svg slot="profile-pic" class="icon" id="account-icon">
            <use href="./icons/game.svg#icon-user" />
          </svg>
        </div>
        <label
          onchange="event.stopPropagation();
            toggleDarkMode(document.body, event.target.checked)"
        >
          <input type="checkbox" />
          Dark mode
        </label>
      </header>
      <div slot="games-rated" id="games-rated">
        <h1>Games you Rated</h1>
        <div slot="games" class="game-layout">
          <a href="./game.html"
            ><game-card>
              <h1 slot="game-name">Cats</h1>
              <li slot="price">Price: Free</li>
              <li slot="genre">Genre: Clicker</li>
              <li slot="rating">Rating: 7.4</li>
              <li slot="player-count">Current Players: 21,841</li>
            </game-card></a
          >
        </div>
      </div>
    </account-card>
  </body>
</html>
